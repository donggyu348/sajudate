<!DOCTYPE html>
<html lang="ko">
<%- include('./../../common/header') %>

<body>
 
<div class="flex flex-col w-full max-w-[480px] mx-auto">
    <div class="flex justify-center flex-col items-center mx-auto max-w-7xl">

        <%- include('./../../common/common') %>

        <div id="container">

            <div class="relative w-full max-w-[448px] mx-auto">

                <div class="relative">
                    <img src="/assets/images/tight/romantic/report_1.png" class="w-full h-auto object-cover"/>
                    <img src="/assets/images/svg/4.svg" class="absolute top-[-15%] left-0 w-full h-auto" />

               <%
const STEM_TO_HANJA = {
  'ê°‘':'ç”²','ì„':'ä¹™','ë³‘':'ä¸™','ì •':'ä¸','ë¬´':'æˆŠ',
  'ê¸°':'å·±','ê²½':'åºš','ì‹ ':'è¾›','ìž„':'å£¬','ê³„':'ç™¸'
};

// ì§€ì§€
const BRANCH_TO_HANJA = {
  'ìž':'å­','ì¶•':'ä¸‘','ì¸':'å¯…','ë¬˜':'å¯','ì§„':'è¾°','ì‚¬':'å·³',
  'ì˜¤':'åˆ','ë¯¸':'æœª','ì‹ ':'ç”³','ìœ ':'é…‰','ìˆ ':'æˆŒ','í•´':'äº¥'
};

// ë³€í™˜ í•¨ìˆ˜ (ì²œê°„/ì§€ì§€ ìžë™íŒë³„)
function H(v){
  return STEM_TO_HANJA[v] || BRANCH_TO_HANJA[v] || v;
}


%>

                
                <!-- ì‹­ì„± 1ì—´-->
                <div class="absolute top-[56%] left-[14%] w-[15%] min-h-[4rem] flex flex-col items-center justify-center">
                    <p class="font-gyeonggibatangbold text-gray-400 text-lg"><%= sample.tenGodTable.headerRows[0]; %></p>
                </div>
                <div class="absolute top-[68%] left-[14%] w-[15%] min-h-[4rem] flex flex-col items-center justify-center">
                    <p class="font-gyeonggibatangbold text-white text-2xl"><%= H(sample.tenGodTable.data[0][1]); %></p>
                </div>
                <div class="absolute top-[78%] left-[14%] w-[15%] min-h-[4rem] flex flex-col items-center justify-center">
                    <p class="font-gyeonggibatangbold text-white text-2xl"><%= H(sample.tenGodTable.data[0][2]); %></p>
                </div>

                <!-- ì‹­ì„± 2ì—´-->
                <div class="absolute top-[56%] left-[33%] w-[15%] min-h-[4rem] flex flex-col items-center justify-center">
                    <p class="font-gyeonggibatangbold text-gray-400 text-lg"><%= sample.tenGodTable.headerRows[1]; %></p>
                </div>
                <div class="absolute top-[68%] left-[33%] w-[15%] min-h-[4rem] flex flex-col items-center justify-center">
                    <p class="font-gyeonggibatangbold text-white text-2xl"><%= H(sample.tenGodTable.data[1][1]); %></p>
                </div>
                <div class="absolute top-[78%] left-[33%] w-[15%] min-h-[4rem] flex flex-col items-center justify-center">
                    <p class="font-gyeonggibatangbold text-white text-2xl"><%= H(sample.tenGodTable.data[1][2]); %></p>
                </div>

                <!-- ì‹­ì„± 3ì—´-->
                <div class="absolute top-[56%] left-[52%] w-[15%] min-h-[4rem] flex flex-col items-center justify-center">
                    <p class="font-gyeonggibatangbold text-gray-400 text-lg"><%= sample.tenGodTable.headerRows[2]; %></p>
                </div>
                <div class="absolute top-[68%] left-[52%] w-[15%] min-h-[4rem] flex flex-col items-center justify-center">
                    <p class="font-gyeonggibatangbold text-white text-2xl"><%= H(sample.tenGodTable.data[2][1]); %></p>
                </div>
                <div class="absolute top-[78%] left-[52%] w-[15%] min-h-[4rem] flex flex-col items-center justify-center">
                    <p class="font-gyeonggibatangbold text-white text-2xl"><%= H(sample.tenGodTable.data[2][2]); %></p>
                </div>

                <!-- ì‹­ì„± 4ì—´-->
                <div class="absolute top-[56%] left-[71%] w-[15%] min-h-[4rem] flex flex-col items-center justify-center">
                    <p class="font-gyeonggibatangbold text-gray-400 text-lg"><%= sample.tenGodTable.headerRows[3]; %></p>
                </div>
                <div class="absolute top-[68%] left-[71%] w-[15%] min-h-[4rem] flex flex-col items-center justify-center">
                    <p class="font-gyeonggibatangbold text-white text-2xl"><%= H(sample.tenGodTable.data[3][1]); %></p>
                </div>
                <div class="absolute top-[78%] left-[71%] w-[15%] min-h-[4rem] flex flex-col items-center justify-center">
                    <p class="font-gyeonggibatangbold text-white text-2xl"><%= H(sample.tenGodTable.data[3][2]); %></p>
                </div>
            </div>

     

                <div class="relative">
                    <img src="/assets/images/tight/romantic/report_2.png" class="w-full h-auto object-cover"/>
                    <div class="absolute top-[65%] left-[13%] w-[10%] min-h-[4rem] flex flex-col items-center justify-center">
                        <p class="text-sm"><%= sampleInfo.fiveElements.elements.ìˆ˜; %></p>
                    </div>
                    <div class="absolute top-[65%] left-[31%] w-[10%] min-h-[4rem] flex flex-col items-center justify-center">
                        <p class="text-sm"><%= sampleInfo.fiveElements.elements.ê¸ˆ; %></p>
                    </div>
                    <div class="absolute top-[65%] left-[49%] w-[10%] min-h-[4rem] flex flex-col items-center justify-center">
                        <p class="text-sm"><%= sampleInfo.fiveElements.elements.í† ; %></p>
                    </div>
                    <div class="absolute top-[65%] left-[66%] w-[10%] min-h-[4rem] flex flex-col items-center justify-center">
                        <p class="text-sm"><%= sampleInfo.fiveElements.elements.í™”; %></p>
                    </div>
                    <div class="absolute top-[65%] left-[84%] w-[10%] min-h-[4rem] flex flex-col items-center justify-center">
                        <p class="text-sm"><%= sampleInfo.fiveElements.elements.ëª©; %></p>
                    </div>
                </div>
             
<%
    const g = String(userInfo.gender).trim(); // ì‹¤ì œ ë“¤ì–´ì˜¤ëŠ” ê°’: "ë‚¨ì„±"

    // ì„±ë³„ â†’ í´ë”ëª… ë³€í™˜
    let genderKey = "man"; 
    if (["ì—¬","ì—¬ìž","ì—¬ì„±","female","F","woman"].includes(g)) genderKey = "woman";
    if (["ë‚¨","ë‚¨ìž","ë‚¨ì„±","male","M","man"].includes(g)) genderKey = "man";

    const dayStem = sampleInfo.tenGodTable?.data?.[1]?.[1]
        ? H(sampleInfo.tenGodTable.data[1][1])
        : null;

    const STEM_TO_KR_KEY = {
        "ç”²":"ê°‘ëª©","ä¹™":"ì„ëª©","ä¸™":"ë³‘í™”","ä¸":"ì •í™”","æˆŠ":"ë¬´í† ",
        "å·±":"ê¸°í† ","åºš":"ê²½ê¸ˆ","è¾›":"ì‹ ê¸ˆ","å£¬":"ìž„ìˆ˜","ç™¸":"ê³„ìˆ˜"
    };

    const stemKey = STEM_TO_KR_KEY[dayStem];

    // ðŸ”¥ ì´ë¯¸ì§€ íŒŒì¼ ê²½ë¡œ (ë„¤ê°€ ì¤€ ë°°ì—´ ê·¸ëŒ€ë¡œ ìœ ì§€í•˜ë˜ gender ë°˜ì˜ë¨)
    const dayMasterImages = [
        `/assets/images/tight/romantic/report/${stemKey}13.png`,
        `/assets/images/tight/romantic/report/${genderKey}/${stemKey}1.png`,
        `/assets/images/tight/romantic/report/${genderKey}/${stemKey}3.png`,
    ];
%>

<% if(dayMasterImages.length){ %>
    <% dayMasterImages.forEach(imgPath => { %>
        <div class="relative w-full max-w-[448px] mx-auto">
            <img src="<%= imgPath %>" class="w-full h-auto object-cover"/>
        </div>
    <% }) %>
<% } %>


Â  Â  Â  Â  Â  Â  Â  Â  <div class="relative">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <% let currentChapter = ''; %>
                    <% reportInfo.forEach((item, index) => { %>
                        <% if (item.chapter !== currentChapter) { %>
                            <% currentChapter = item.chapter; %>
                        <div class="bg-[#fbf4f9] pb-32">
                            <div class="inline-block ml-8 px-4 py-1 border border-b-black text-xl  rounded-full w-auto max-w-fit">
                                <%= item.chapter %>
                            </div>
                            <div class="mt-10 text-left space-y-10 text-black text-xl mr-8 ml-8">
                                <% } %>

                                <div>
                                    <div class="text-[#c73f89] text-left font-bold text-4xl leading-tight whitespace-pre-line">
                                        <%= item.title %>
                                    </div>
                                    <p class="whitespace-pre-line pt-16 pb-16"><%= item.content %></p>
                                </div>

                                <%
                                    const nextItem = reportInfo[index + 1];
                                if (!nextItem || nextItem.chapter !== currentChapter) {
                                %>
                            </div>
                        </div>
                        <% } %>
                    <% }); %>
                </div>

            </div>
        </div>

    </div>
</div>

</body>
</html>
